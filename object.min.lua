local function _setfenv(a,b)for c=1,math.huge do local d=debug.getupvalue(a,c)if d==nil then break elseif d=="_ENV"then debug.upvaluejoin(a,c,function()return b end,1)break end end;return a end;local function def(a,b,c)(setfenv or _setfenv)(b,setmetatable(c or{self=a},{__index=_G,__newindex=a}))()return a end;return def({},function()local function a(self,b)return self[b]end;local function c(self,d)for b,e in pairs(d)do self[b]=e end end;local function f(self)return tostring(self):match("^.-%s(.-)$")end;function create(prototype,...)local g=setmetatable({prototype=prototype},{__index=prototype})if prototype.constructor then prototype.constructor(g,...)end;return g end;function prototype(h,i)local j,k=i and h,h and i or h;local prototype=setmetatable({super=j,get=a,set=c,hash=f},{__index=j,__call=self.create})return def(prototype,k,{self=prototype,super=j})end end);
